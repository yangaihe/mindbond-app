<template>
  <page-root>
    <template #body>
      <view class="p-[30rpx]">
        <!-- Back Button -->
        <view class="flex items-center justify-between mb-md fade-in">
          <view class="flex items-center gap-sm">
            <view class="btn btn-secondary btn-sm" style="padding: 16rpx 24rpx;" @click="goBack">
              <text class="fas fa-arrow-left"></text>
            </view>
            <text class="text-muted text-sm">æ—¥è®°è¯¦æƒ…</text>
          </view>
          <view class="btn btn-secondary btn-sm" style="padding: 16rpx 24rpx;" @click="showMenu = !showMenu">
            <text class="fas fa-ellipsis-v"></text>
          </view>
        </view>

        <!-- Journal Header -->
        <view class="journal-header fade-in" style="animation-delay: 0.1s;">
          <view>
            <view class="journal-date-text">2026å¹´1æœˆ10æ—¥ 21:15</view>
          </view>
          <text class="journal-emotion">ğŸ˜Œ</text>
        </view>

        <!-- Journal Type -->
        <view class="fade-in" style="animation-delay: 0.1s;">
          <text class="journal-type-badge">
            <text class="fas fa-feather"></text> è§‰å¯Ÿæ—¥è®°
          </text>
        </view>

        <!-- Journal Content -->
        <view class="journal-content-text fade-in" style="animation-delay: 0.15s;">
          ä»Šå¤©åœ¨ä¹¦æˆ¿è¯»åˆ°"è¯¾é¢˜åˆ†ç¦»"è¿™ä¸ªæ¦‚å¿µï¼Œçªç„¶æœ‰ç§è¢«ç‚¹é†’çš„æ„Ÿè§‰ã€‚æˆ‘ä¸€ç›´ä»¥æ¥éƒ½åœ¨ä¸ºåˆ«äººçš„æƒ…ç»ªè´Ÿè´£ï¼Œæ€»è§‰å¾—å¦‚æœå¯¹æ–¹ä¸å¼€å¿ƒï¼Œä¸€å®šæ˜¯æˆ‘åšé”™äº†ä»€ä¹ˆã€‚
          <br><br>
          ä½†å…¶å®ï¼Œåˆ«äººçš„æƒ…ç»ªæ˜¯åˆ«äººçš„è¯¾é¢˜ï¼Œæˆ‘èƒ½åšçš„åªæ˜¯åšå¥½è‡ªå·±ã€‚å½“æˆ‘å¼€å§‹è¿™æ ·æƒ³çš„æ—¶å€™ï¼Œçªç„¶æ„Ÿè§‰è‚©ä¸Šçš„æ‹…å­è½»äº†å¾ˆå¤šã€‚
          <br><br>
          è¿™å‘¨æˆ‘è¦ç»ƒä¹ çš„å°±æ˜¯ï¼šæ¯å½“æˆ‘æƒ³ä¸ºåˆ«äººçš„æƒ…ç»ªè´Ÿè´£æ—¶ï¼Œå…ˆé—®è‡ªå·±"è¿™æ˜¯è°çš„è¯¾é¢˜ï¼Ÿ"
        </view>

        <!-- Tags -->
        <view class="journal-tags fade-in" style="animation-delay: 0.2s;">
          <text class="badge badge-gold">è¯¾é¢˜åˆ†ç¦»</text>
          <text class="badge badge-blue">è¯»ä¹¦è§‰å¯Ÿ</text>
          <text class="badge badge-green">æˆé•¿</text>
        </view>

        <!-- Related Book -->
        <view class="related-book fade-in" style="animation-delay: 0.25s;">
          <image src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=100&h=140&fit=crop"
            class="related-book-cover" alt="" mode="aspectFill"></image>
          <view class="related-book-info">
            <view class="related-book-title">è¢«è®¨åŒçš„å‹‡æ°”</view>
            <view class="related-book-chapter">ç¬¬12è®² Â· è¯¾é¢˜åˆ†ç¦»çš„å‹‡æ°”</view>
          </view>
          <text class="related-book-link" @click="viewBook">æŸ¥çœ‹ ></text>
        </view>

        <!-- AI Insight -->
        <view class="ai-insight-card fade-in" style="animation-delay: 0.3s;">
          <view class="ai-insight-header">
            <view class="ai-icon">
              <text class="fas fa-sparkles"></text>
            </view>
            <text class="ai-insight-title">AI æ´è§</text>
          </view>
          <view class="ai-insight-content">
            ä½ ä»Šå¤©çš„è§‰å¯Ÿå¾ˆæ·±åˆ»ï¼"è¯¾é¢˜åˆ†ç¦»"æ˜¯é˜¿å¾·å‹’å¿ƒç†å­¦çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ã€‚
          </view>
          <view class="ai-insight-highlight">
            <view>
              <view class="strong">æ¨¡å¼å‘ç°ï¼š</view>æˆ‘æ³¨æ„åˆ°"ä¸ºåˆ«äººçš„æƒ…ç»ªè´Ÿè´£"è¿™ä¸ªä¸»é¢˜åœ¨ä½ è¿‡å»çš„æ—¥è®°ä¸­å‡ºç°è¿‡ <view class="strong">3 æ¬¡</view>
              ï¼ˆ1æœˆ3æ—¥ã€1æœˆ6æ—¥ã€ä»Šå¤©ï¼‰ã€‚ä»Šå¤©çš„è§‰å¯Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„è½¬æŠ˜ç‚¹â€”â€”ä½ å¼€å§‹ä»"è‡ªåŠ¨åŒ–ååº”"è½¬å‘"æœ‰æ„è¯†çš„é€‰æ‹©"ã€‚
            </view>
          </view>

          <view class="insight-history">
            <view class="insight-history-header">
              <view>ç›¸å…³å†å²æ´è§</view>
              <view @click.prevent="viewAllInsights">æŸ¥çœ‹å…¨éƒ¨</view>
            </view>
            <view class="insight-item">
              <view class="insight-item-date">1æœˆ6æ—¥çš„æ—¥è®°</view>
              <view class="insight-item-content">"ä½ æåˆ°æ‹…å¿ƒå¥³å„¿è€ƒè¯•æˆç»©ä¼šå½±å“ä½ çš„å¿ƒæƒ…ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§'ä¸ºä»–äººæƒ…ç»ªè´Ÿè´£'çš„è¡¨ç°..."</view>
            </view>
            <view class="insight-item">
              <view class="insight-item-date">1æœˆ3æ—¥çš„æ—¥è®°</view>
              <view class="insight-item-content">"å½“é¢†å¯¼çš±çœ‰æ—¶ä½ ä¼šç´§å¼ ï¼Œè¿™å¯èƒ½æºäºç«¥å¹´æ—¶æœŸå¯¹çˆ¶æ¯æƒ…ç»ªçš„è¿‡åº¦å…³æ³¨..."</view>
            </view>
          </view>
        </view>

        <!-- Visibility Toggle -->
        <view class="visibility-toggle fade-in" style="animation-delay: 0.35s;">
          <view class="visibility-info">
            <view class="visibility-icon">
              <text class="fas fa-globe"></text>
            </view>
            <view class="visibility-text">
              <view>å…¬å¼€åˆ°å¹¿åœº</view>
              <view>å…¶ä»–ç”¨æˆ·å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ—¥è®°</view>
            </view>
          </view>
          <view class="toggle-switch" :class="{ active: isPublic }" @click="isPublic = !isPublic"></view>
        </view>

        <!-- Social Stats (shown when public) -->
        <view v-if="isPublic" class="social-stats fade-in" style="animation-delay: 0.4s;">
          <view class="social-stat liked">
            <text class="fas fa-heart"></text>
            <text>128 èµ</text>
          </view>
          <view class="social-stat">
            <text class="far fa-comment"></text>
            <text>23 è¯„è®º</text>
          </view>
          <view class="social-stat">
            <text class="far fa-bookmark"></text>
            <text>15 æ”¶è—</text>
          </view>
        </view>

        <!-- Action Buttons -->
        <view class="action-buttons fade-in" style="animation-delay: 0.45s;">
          <view class="action-btn primary" @click="editJournal">
            <text class="fas fa-edit"></text> ç¼–è¾‘
          </view>
          <view class="action-btn" @click="shareJournal">
            <text class="fas fa-share"></text> åˆ†äº«
          </view>
          <view class="action-btn danger" @click="deleteJournal">
            <text class="fas fa-trash"></text> åˆ é™¤
          </view>
        </view>

        <!-- Created Info -->
        <view class="fade-in" style="animation-delay: 0.5s; text-align: center; padding: 32rpx 0;">
          <view class="text-sm text-muted">
            <text class="fas fa-clock"></text> åˆ›å»ºäº 2026å¹´1æœˆ10æ—¥ 21:15
          </view>
          <view class="text-sm text-muted" style="margin-top: 8rpx;">
            <text class="fas fa-edit"></text> æœ€åç¼–è¾‘äº 2026å¹´1æœˆ10æ—¥ 21:30
          </view>
        </view>

        <!-- Bottom Spacing -->
        <view style="height: 40rpx;"></view>
      </view>
    </template>
  </page-root>

</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'


const router = useRouter()

const showMenu = ref(false)
const isPublic = ref(true)

const goBack = () => {
  router.back()
}

const handleTabChange = (tab: string) => {
  const routes: Record<string, string> = {
    home: '/home',
    bookroom: '/bookroom-hub',
    journal: '/journal',
    plaza: '/plaza',
    profile: '/profile'
  }
  router.push(routes[tab] || '/')
}

const viewBook = () => {
  router.push('/book/1')
}

const viewAllInsights = () => {
  router.push('/insights')
}

const editJournal = () => {
  router.push('/write-journal?edit=1')
}

const shareJournal = () => {
  console.log('Share journal')
}

const deleteJournal = () => {
  if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ—¥è®°å—ï¼Ÿ')) {
    router.push('/journal')
  }
}
</script>

<style scoped>
.journal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40rpx;
}

.journal-date-text {
  font-size: 28rpx;
  color: var(--text-muted);
}

.journal-emotion {
  font-size: 64rpx;
}

.journal-type-badge {
  display: inline-flex;
  align-items: center;
  gap: 12rpx;
  padding: 12rpx 24rpx;
  background: rgba(244, 208, 63, 0.15);
  border-radius: 40rpx;
  font-size: 26rpx;
  color: var(--accent-gold);
  margin-bottom: 32rpx;
}

.journal-content-text {
  font-size: 32rpx;
  color: var(--text-primary);
  line-height: 2;
  margin-bottom: 40rpx;
}

.journal-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 16rpx;
  margin-bottom: 40rpx;
}

.related-book {
  display: flex;
  align-items: center;
  gap: 24rpx;
  padding: 28rpx;
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-md);
  margin-bottom: 40rpx;
}

.related-book-cover {
  width: 88rpx;
  height: 116rpx;
  border-radius: 12rpx;
}

.related-book-info {
  flex: 1;
}

.related-book-title {
  font-size: 28rpx;
  color: var(--text-primary);
  margin-bottom: 4rpx;
}

.related-book-chapter {
  font-size: 24rpx;
  color: var(--text-muted);
}

.related-book-link {
  font-size: 24rpx;
  color: var(--accent-gold);
  cursor: pointer;
}

.ai-insight-card {
  background: linear-gradient(135deg, rgba(244, 208, 63, 0.1) 0%, rgba(243, 156, 18, 0.05) 100%);
  border-radius: var(--radius-lg);
  padding: 40rpx;
  margin-bottom: 40rpx;
  border: 2rpx solid rgba(244, 208, 63, 0.15);
}

.ai-insight-header {
  display: flex;
  align-items: center;
  gap: 20rpx;
  margin-bottom: 28rpx;
}

.ai-icon {
  width: 72rpx;
  height: 72rpx;
  background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-orange) 100%);
  border-radius: 20rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #1a1a2e;
  font-size: 32rpx;
}

.ai-insight-title {
  font-size: 30rpx;
  color: var(--accent-gold);
  font-weight: 600;
}

.ai-insight-content {
  font-size: 28rpx;
  color: var(--text-secondary);
  line-height: 1.8;
  margin-bottom: 32rpx;
}

.ai-insight-highlight {
  background: rgba(244, 208, 63, 0.1);
  padding: 24rpx 28rpx;
  border-radius: 20rpx;
  border-left: 6rpx solid var(--accent-gold);
}

.ai-insight-highlight view {
  font-size: 26rpx;
  color: var(--text-secondary);
  line-height: 1.7;
}

.ai-insight-highlight .strong {
  color: var(--accent-gold);
}

.insight-history {
  margin-top: 40rpx;
}

.insight-history-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24rpx;
}

.insight-history-header view:first-child {
  font-size: 28rpx;
  color: var(--text-muted);
}

.insight-history-header view:last-child {
  font-size: 24rpx;
  color: var(--accent-gold);
  text-decoration: none;
}

.insight-item {
  padding: 28rpx;
  background: var(--bg-card);
  border-radius: var(--radius-md);
  margin-bottom: 20rpx;
}

.insight-item-date {
  font-size: 22rpx;
  color: var(--text-muted);
  margin-bottom: 12rpx;
}

.insight-item-content {
  font-size: 26rpx;
  color: var(--text-secondary);
  line-height: 1.6;
}

.visibility-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 32rpx;
  background: var(--bg-card);
  border-radius: var(--radius-md);
  margin-bottom: 32rpx;
}

.visibility-info {
  display: flex;
  align-items: center;
  gap: 24rpx;
}

.visibility-icon {
  width: 80rpx;
  height: 80rpx;
  border-radius: 20rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32rpx;
  background: rgba(88, 214, 141, 0.2);
  color: var(--accent-green);
}

.visibility-text view:first-child {
  font-size: 28rpx;
  color: var(--text-primary);
  margin-bottom: 4rpx;
}

.visibility-text view:last-child {
  font-size: 24rpx;
  color: var(--text-muted);
}

.toggle-switch {
  width: 100rpx;
  height: 56rpx;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 28rpx;
  position: relative;
  cursor: pointer;
  transition: all 0.3s;
}

.toggle-switch.active {
  background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-orange) 100%);
}

.toggle-switch::after {
  content: '';
  position: absolute;
  width: 44rpx;
  height: 44rpx;
  background: #fff;
  border-radius: 50%;
  top: 6rpx;
  left: 6rpx;
  transition: all 0.3s;
}

.toggle-switch.active::after {
  left: 50rpx;
}

.social-stats {
  display: flex;
  align-items: center;
  gap: 48rpx;
  padding: 32rpx;
  background: var(--bg-card);
  border-radius: var(--radius-md);
  margin-bottom: 40rpx;
}

.social-stat {
  display: flex;
  align-items: center;
  gap: 16rpx;
  font-size: 28rpx;
  color: var(--text-secondary);
}

.social-stat text:first-child {
  font-size: 36rpx;
}

.social-stat.liked text:first-child {
  color: #e74c3c;
}

.action-buttons {
  display: flex;
  gap: 24rpx;
  margin-bottom: 40rpx;
}

.action-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16rpx;
  padding: 28rpx;
  background: var(--bg-card);
  border-radius: var(--radius-md);
  font-size: 28rpx;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
  border: none;
}

.action-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.action-btn.danger {
  color: #e74c3c;
}

.action-btn.primary {
  background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-orange) 100%);
  color: #1a1a2e;
  font-weight: 600;
}
</style>